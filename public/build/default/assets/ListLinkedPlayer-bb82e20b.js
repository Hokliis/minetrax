import{A as V,u as A}from"./AppLayout-180f66c1.js";import{I as B}from"./Icon-09cf2959.js";import{S as D,W as N}from"./viewer-90f975be.js";import{_ as z}from"./CopyToClipboard-da0e6391.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{o as n,d as r,a as t,l as c,q as P,c as y,w as u,b as _,n as m,t as s,j as d,f as k,e as f,g as M,F as R}from"./app-d03084a3.js";import"./useAuthorizable-db63a772.js";function H(e,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{d:"M18 1.5c2.9 0 5.25 2.35 5.25 5.25v3.75a.75.75 0 01-1.5 0V6.75a3.75 3.75 0 10-7.5 0v3a3 3 0 013 3v6.75a3 3 0 01-3 3H3.75a3 3 0 01-3-3v-6.75a3 3 0 013-3h9v-3c0-2.9 2.35-5.25 5.25-5.25z"})])}function Y(e,i){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 00-3.471 2.987 10.04 10.04 0 014.815 4.815 18.748 18.748 0 002.987-3.472l3.386-5.079A1.902 1.902 0 0020.599 1.5zm-8.3 14.025a18.76 18.76 0 001.896-1.207 8.026 8.026 0 00-4.513-4.513A18.75 18.75 0 008.475 11.7l-.278.5a5.26 5.26 0 013.601 3.602l.502-.278zM6.75 13.5A3.75 3.75 0 003 17.25a1.5 1.5 0 01-1.601 1.497.75.75 0 00-.7 1.123 5.25 5.25 0 009.8-2.62 3.75 3.75 0 00-3.75-3.75z","clip-rule":"evenodd"})])}const F={components:{Icon:B,AppLayout:V,LockOpenIcon:H,PaintBrushIcon:Y,CopyToClipboard:z},props:{linkedPlayers:Array,maxPlayerPerUser:Number,currentLinkOtp:Object,isUnlinkingDisabled:Boolean},setup(){const{formatTimeAgoToNow:e,formatToDayDateString:i}=A();return{formatTimeAgoToNow:e,formatToDayDateString:i}},data(){var e;return{skinViewers:[],otpExpiryCountdownInterval:null,otpExpiryCountdownSeconds:(e=this.currentLinkOtp)!=null&&e.expires_at?Math.floor((new Date(this.currentLinkOtp.expires_at).getTime()-new Date().getTime())/1e3):null}},computed:{linkSlotsLeft(){return this.maxPlayerPerUser-this.linkedPlayers.length}},unmounted(){for(const e of this.skinViewers)e.dispose();clearInterval(this.otpExpiryCountdownInterval)},mounted(){for(const e of this.linkedPlayers){let i=new D({canvas:document.getElementById(`skin_container_${e.uuid}`),width:200,height:300,skin:route("player.skin.get",{uuid:e.uuid,username:e.username,textureid:e.skin_texture_id})});i.autoRotate=!0,i.animation=new N,i.animation.speed=.1,i.autoRotateSpeed=.5,this.skinViewers.push(i)}this.startOtpExpiryCountdown()},methods:{startOtpExpiryCountdown(){this.otpExpiryCountdownSeconds>0&&(this.otpExpiryCountdownInterval=setInterval(()=>{this.otpExpiryCountdownSeconds--,this.otpExpiryCountdownSeconds<=0&&clearInterval(this.otpExpiryCountdownInterval)},1e3))}}},W={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},q={class:"flex"},G={class:"py-1"},J=t("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"},null,-1),K=[J],Q={class:"w-full"},X={class:"font-bold"},Z={key:0},$={key:1},ee={class:"flex flex-col items-center mt-2 text-sm"},te={class:"text-gray-500 dark:text-gray-400"},oe=["title","onClick"],se={key:0},ne={key:1},re={key:0,class:"italic dark:text-gray-400 mt-4"},ie={key:1},ae={class:"dark:text-gray-400 mt-4"},le={key:0,class:"flex justify-center pt-5 pb-5 pr-10"},ce={class:"italic text-red-500"},de=["id"],ue={class:"flex flex-col space-y-2"},_e={class:"username"},he={class:"text-xs text-gray-500 dark:text-gray-400"},pe={class:"flex items-center justify-between"},ye={class:"font-bold dark:text-gray-400"},me={class:"flex items-center space-x-2 text-sm font-extrabold text-center text-light-blue-400"},ke={key:0,class:"px-2 text-lg border-2 rounded border-light-blue-300 bg-light-blue-50 dark:bg-cool-gray-800"},fe={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},ge={class:"flex items-center justify-between"},xe={class:"font-bold dark:text-gray-400"},we={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},be={class:"flex items-center justify-between"},ve={class:"font-bold dark:text-gray-400"},Ce={class:"flex items-center space-x-2"},Pe={key:0,class:"dark:text-gray-200"},Le={key:1,class:"text-sm italic text-gray-500 dark:text-gray-400"},Se=["src","alt","title"],Ee={class:"flex items-center justify-between"},Ie={class:"font-bold dark:text-gray-400"},Oe={class:"flex items-center space-x-2"},Te={class:"dark:text-gray-200"},je=["title","src","alt"],Ve={class:"flex items-center justify-between"},Ae={class:"font-bold dark:text-gray-400"},Be={class:"flex items-center space-x-2"},De=["title"],Ne={class:"flex justify-end space-x-4"};function ze(e,i,a,x,g,h){const L=c("app-head"),S=c("copy-to-clipboard"),p=c("inertia-link"),E=c("icon"),I=c("PaintBrushIcon"),O=c("LockOpenIcon"),T=c("app-layout"),l=P("tippy"),j=P("confirm");return n(),y(T,null,{default:u(()=>{var w,b;return[_(L,{title:e.__("Your Linked Players")},null,8,["title"]),t("div",W,[t("div",{class:m(["px-4 py-3 mb-4 bg-white border-t-4 rounded-b shadow dark:bg-cool-gray-800",{"border-sky-500 text-sky-900 dark:text-sky-400":h.linkSlotsLeft>0,"border-orange-500 opacity-35 text-orange-900 dark:text-orange-400":h.linkSlotsLeft<=0}]),role:"alert"},[t("div",q,[t("div",G,[(n(),r("svg",{class:m(["w-6 h-6 mr-4 fill-current text-light-blue-500",{"text-orange-500":h.linkSlotsLeft<=0}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},K,2))]),t("div",Q,[t("p",X,[h.linkSlotsLeft>0?(n(),r("span",Z,s(e.__("You can link upto :count :player to your account! ( :left available )",{count:a.maxPlayerPerUser,player:a.maxPlayerPerUser===1?e.__("player"):e.__("players"),left:h.linkSlotsLeft})),1)):(n(),r("span",$,s(e.__("You have already linked maximum number of players to your account!")),1))]),t("div",ee,[t("p",te,s(e.__("To link a player to your account, join server and type '/link :otp' in your chat.",{otp:(w=a.currentLinkOtp)==null?void 0:w.otp})),1),t("h1",{class:m([{"line-through":g.otpExpiryCountdownSeconds<=0},"font-mono text-6xl font-extrabold tracking-widest text-center text-black dark:text-white"])},s((b=a.currentLinkOtp)==null?void 0:b.otp),3),_(S,null,{default:u(o=>{var v;return[d((n(),r("button",{title:e.__("Click to Copy"),type:"button",class:"p-2 mt-3 font-semibold text-center font-mono tracking-wider text-gray-600 transition duration-150 ease-in-out border border-gray-200 rounded w-full md:w-1/2 dark:border-gray-700 dark:text-gray-300 hover:text-light-blue-500 dark:hover:text-light-blue-400 hover:bg-light-blue-50 dark:hover:bg-cool-gray-900 hover:border-light-blue-500 dark:hover:border-cool-gray-800 focus:ring focus:ring-light-blue-200 focus:ring-opacity-50 focus:outline-none",onClick:Ue=>{var C;return o.copy("/link "+((C=a.currentLinkOtp)==null?void 0:C.otp))}},[o.status!=="copied"?(n(),r("span",se,s("/link "+((v=a.currentLinkOtp)==null?void 0:v.otp)),1)):(n(),r("span",ne,s(e.__("Copied!")),1))],8,oe)),[[l]])]}),_:1}),g.otpExpiryCountdownSeconds>0?(n(),r("p",re,s(e.__("This OTP will expire in :seconds seconds.",{seconds:g.otpExpiryCountdownSeconds})),1)):(n(),r("div",ie,[t("p",ae,[k(s(e.__("This OTP has expired. Refresh the page to get a new OTP."))+" ",1),_(p,{as:"button",href:e.route("linked-player.list"),class:"dark:text-sky-400 dark:hover:text-sky-500 text-sky-500 hover:text-sky-700 hover:underline"},{default:u(()=>[k(s(e.__("Click here to refresh.")),1)]),_:1},8,["href"])])]))])])])],2),t("div",{class:m(["gap-4 space-y-2 md:grid md:space-y-0",a.linkedPlayers.length>1?"grid-cols-2":"grid-cols-1 place-items-center"])},[a.linkedPlayers.length<=0?(n(),r("div",le,[t("p",ce,s(e.__("No players linked to your account right now.")),1)])):f("",!0),(n(!0),r(R,null,M(a.linkedPlayers,o=>(n(),r("div",{key:o.uuid,class:"flex justify-center pt-5 pb-5 pr-10 bg-white rounded shadow dark:bg-cool-gray-800"},[t("canvas",{id:`skin_container_${o.uuid}`},null,8,de),t("div",ue,[t("div",_e,[_(p,{as:"a",href:e.route("player.show",o.uuid),class:"text-lg font-bold text-light-blue-400 hover:text-light-blue-500"},{default:u(()=>[k(s(o.username),1)]),_:2},1032,["href"]),t("p",he,s(o.uuid),1)]),t("div",pe,[t("p",ye,s(e.__("Position"))+": ",1),t("div",me,[o.position?(n(),r("span",ke,s(o.position),1)):(n(),r("span",fe,s(e.__("None")),1))])]),t("div",ge,[t("p",xe,s(e.__("Rating"))+": ",1),o.rating!=null?d((n(),y(E,{key:0,class:"w-8 h-8 focus:outline-none",name:`rating-${o.rating}`,content:o.rating},null,8,["name","content"])),[[l]]):(n(),r("p",we,s(e.__("None")),1))]),t("div",be,[t("p",ve,s(e.__("Rank"))+": ",1),t("div",Ce,[o.rank?(n(),r("p",Pe,s(o.rank.name),1)):(n(),r("p",Le,s(e.__("None")),1)),o.rank&&o.rank.photo_url?d((n(),r("img",{key:2,src:o.rank.photo_url,alt:o.rank.name,title:o.rank.name,class:"max-h-12 max-w-12 focus:outline-none"},null,8,Se)),[[l]]):f("",!0)])]),t("div",Ee,[t("p",Ie,s(e.__("Country"))+": ",1),t("div",Oe,[t("p",Te,s(o.country.name),1),d(t("img",{title:o.country.name,src:o.country.photo_path,alt:o.country.name,class:"h-8 w-8 -mt-0.5 focus:outline-none"},null,8,je),[[l]])])]),t("div",Ve,[t("p",Ae,s(e.__("Last Seen"))+": ",1),t("div",Be,[d((n(),r("p",{class:"focus:outline-none dark:text-gray-200",title:x.formatToDayDateString(o.last_seen_at)},[k(s(x.formatTimeAgoToNow(o.last_seen_at)),1)],8,De)),[[l]])])]),t("div",Ne,[e.$page.props.playerSkinChangerEnabled?d((n(),y(p,{key:0,as:"a",href:e.route("change-player-skin.show",{player_uuid:o.uuid}),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-sky-400 hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-400 disabled:opacity-50",title:e.__("Change Skin of this player.")},{default:u(()=>[_(I,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l]]):f("",!0),a.isUnlinkingDisabled?f("",!0):d((n(),y(p,{key:1,as:"button","preserve-scroll":!0,"preserve-state":!1,method:"delete",href:e.route("account-link.delete",o.uuid),class:"inline-flex justify-center px-4 py-2 mt-5 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",title:e.__("Unlink this player from your account.")},{default:u(()=>[_(O,{class:"w-5 h-5"})]),_:2},1032,["href","title"])),[[l],[j,{message:e.__("Are you sure you want to unlink this player from your account?")}]])])])]))),128))],2)])]}),_:1})}const Ge=U(F,[["render",ze]]);export{Ge as default};
