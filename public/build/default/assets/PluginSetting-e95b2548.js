import{T as X,l as V,q as C,o as d,c as A,w as k,b as a,u as e,a as s,t as r,j as u,f as p,i as B,m as b,d as _,g as U,F as S,e as h,k as D,v as $}from"./app-cc9837a5.js";import{_ as Y}from"./AdminLayout-43c7bab8.js";import{L as K}from"./LoadingButton-d8f5c380.js";import{_ as L}from"./CopyToClipboard-da0e6391.js";import{X as v}from"./XInput-b82a6a81.js";import{X as g}from"./XCheckbox-2a1e6775.js";import{X as O}from"./XSelect-433e2671.js";import{I as P}from"./Icon-ed12eab7.js";import{s as q}from"./vue-multiselect.esm-3e251579.js";import"./AppLayout-d0ce35cf.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./useAuthorizable-a6828ca6.js";import"./use-resolve-button-type-e1c4ae2b.js";import"./open-closed-923a379f.js";import"./CloudArrowDownIcon-d345c579.js";import"./index-bc1d8a81.js";const W={class:"py-12 px-10 max-w-6xl mx-auto flex"},z={class:"flex-1"},G={class:"flex flex-col w-full"},H={class:"bg-white dark:bg-cool-gray-800 shadow w-full rounded"},J={class:"px-6 py-4 border-b dark:border-gray-700 dark:text-gray-300 font-bold"},Q={class:"mt-10 sm:mt-0"},Z={class:"md:grid md:grid-cols-3 md:gap-6"},ee={class:"mt-5 md:mt-0 md:col-span-3"},se={class:"flex items-center justify-end col-span-6 sm:col-span-2 px-6 py-2"},le=["onSubmit"],ne={class:"shadow overflow-hidden sm:rounded-md"},te={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},oe={class:"grid grid-cols-6 gap-6"},re={class:"flex items-center col-span-6 sm:col-span-4"},ae={class:"col-span-6 sm:col-span-6"},ie={class:"col-span-6 sm:col-span-6"},ce={class:"flex items-center col-span-6 sm:col-span-2"},de={class:"col-span-6 sm:col-span-4"},_e={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},ue={class:"text-sm text-gray-700 font-bold dark:font-semibold dark:text-gray-300"},me={class:"text-xs font-light text-gray-400"},pe={class:"w-full space-y-2"},fe={class:"flex flex-col items-end"},ye={class:"text-gray-700 dark:text-gray-300 text-sm font-semibold"},ge={class:"text-sm text-right text-gray-600 dark:text-gray-400"},he=s("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_USERNAME}",-1),ke=s("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_UUID}",-1),be={class:"flex space-x-4"},xe=s("div",{class:"w-5"},null,-1),ve={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},we={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ve={class:"flex space-x-4"},Ce=["onClick"],Ae={class:"grid grid-cols-2 gap-2 w-full"},Ue={class:"flex-1"},Se=["onUpdate:modelValue","placeholder"],$e={key:0,class:"text-red-500 text-sm"},Le={class:"flex-1"},Pe={class:"text-sm text-red-500 mt-0.5"},qe={class:"flex-1 flex col-span-2 space-x-2"},Ee={key:0,class:"text-gray-500 text-sm italic text-center pt-2"},Re={key:1,class:"text-sm text-red-400 text-center"},Ie={class:"flex justify-center pt-5"},Te={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},Ne={class:"text-sm text-gray-700 font-bold dark:font-semibold dark:text-gray-300"},je={class:"text-xs font-light text-gray-400"},Fe={class:"w-full space-y-2"},Me={class:"flex flex-col items-end"},Xe={class:"text-gray-700 dark:text-gray-300 text-sm font-semibold"},Be={class:"text-sm text-right text-gray-600 dark:text-gray-400"},De=s("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_USERNAME}",-1),Ye=s("code",{class:"text-sm bg-gray-100 dark:bg-cool-gray-700 dark:text-gray-300 p-1 rounded-md"},"{PLAYER_UUID}",-1),Ke={class:"flex space-x-4"},Oe=s("div",{class:"w-5"},null,-1),We={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},ze={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ge={class:"flex space-x-4"},He=["onClick"],Je={class:"grid grid-cols-2 gap-2 w-full"},Qe={class:"flex-1"},Ze=["onUpdate:modelValue","placeholder"],es={key:0,class:"text-red-500 text-sm"},ss={class:"flex-1"},ls={class:"text-sm text-red-500 mt-0.5"},ns={class:"flex-1 flex col-span-2 space-x-2"},ts={key:0,class:"text-gray-500 text-sm italic text-center pt-2"},os={key:1,class:"text-sm text-red-400 text-center"},rs={class:"flex justify-center pt-5"},as={class:"flex items-center col-span-6 sm:col-span-6"},is={class:"col-span-6 sm:col-span-6"},cs={class:"px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6 flex justify-end"},As={__name:"PluginSetting",props:{settings:Object,settingsAccountLinkAfterSuccessCommands:Array,settingsAccountUnlinkAfterSuccessCommands:Array,serversForRankSync:Object,serversForAccountLink:Object},setup(m){const f=m,{__:l}=D(),n=X({enable_api:f.settings.enable_api,enable_account_link:f.settings.enable_account_link,max_players_link_per_account:f.settings.max_players_link_per_account,enable_sync_player_ranks_from_server:f.settings.enable_sync_player_ranks_from_server,sync_player_ranks_from_server_id:f.settings.sync_player_ranks_from_server_id,account_link_after_success_commands:f.settingsAccountLinkAfterSuccessCommands,account_unlink_after_success_commands:f.settingsAccountUnlinkAfterSuccessCommands});function E(){n.account_link_after_success_commands.push({command:"",servers:[],config:{is_player_online_required:!1,is_run_only_first_link:!1}})}function R(y){n.account_link_after_success_commands.splice(y,1)}function w({name:y,hostname:c}){return`${y} - ${c}`}function I(){n.account_unlink_after_success_commands.push({command:"",servers:[],config:{is_player_online_required:!1,is_run_only_first_unlink:!1}})}function T(y){n.account_unlink_after_success_commands.splice(y,1)}const N=()=>{n.post(route("admin.setting.plugin.update"),{preserveScroll:!0,preserveState:!1})};return(y,c)=>{const j=V("app-head"),F=V("inertia-link"),M=C("confirm"),x=C("tippy");return d(),A(Y,null,{default:k(()=>[a(j,{title:e(l)("Plugin Settings")},null,8,["title"]),s("div",W,[s("div",z,[s("div",G,[s("div",H,[s("div",J,r(e(l)("Plugin Settings")),1),s("div",Q,[s("div",Z,[s("div",ee,[s("div",se,[u((d(),A(F,{title:e(l)("Warning: This will Regenerate your API and Secret Key."),as:"button",method:"post",href:y.route("admin.setting.plugin.keygen"),class:"inline-flex justify-center py-2 px-4 border border-2 border-red-500 shadow-sm text-sm font-bold rounded-md text-red-500 hover:bg-red-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50"},{default:k(()=>[p(r(e(l)("Regenerate API Credentials")),1)]),_:1},8,["title","href"])),[[M,{message:e(l)("Are you sure? This will regenerate new API Key and Secret and you will have to change in your Plugin config.yml")}],[x]])]),s("form",{autocomplete:"off",onSubmit:B(N,["prevent"])},[s("div",ne,[s("div",te,[s("div",oe,[s("div",re,[a(g,{id:"enable_api",modelValue:e(n).enable_api,"onUpdate:modelValue":c[0]||(c[0]=t=>e(n).enable_api=t),label:e(l)("Enable Plugin"),help:e(l)("Enable this if you are having MineTrax plugin installed in your server."),name:"enable_api",error:e(n).errors.enable_api},null,8,["modelValue","label","help","error"])]),s("div",ae,[a(L,null,{default:k(t=>[u(a(v,{id:"plugin_api_key",title:e(l)("Click to Copy"),"model-value":t.status==="copied"?e(l)("Copied to Clipboard!"):m.settings.plugin_api_key,label:e(l)("API Key"),type:"text",name:"plugin_api_key","input-class":"disabled:opacity-100 hover:cursor-pointer",onClick:o=>t.copy(m.settings.plugin_api_key)},null,8,["title","model-value","label","onClick"]),[[x]])]),_:1})]),s("div",ie,[a(L,null,{default:k(t=>[u(a(v,{id:"plugin_api_secret",title:e(l)("Click to Copy"),"model-value":t.status==="copied"?e(l)("Copied to Clipboard!"):m.settings.plugin_api_secret,label:e(l)("API Secret"),type:"text",name:"plugin_api_secret","input-class":"disabled:opacity-100 hover:cursor-pointer",onClick:o=>t.copy(m.settings.plugin_api_secret)},null,8,["title","model-value","label","onClick"]),[[x]])]),_:1})]),s("div",ce,[a(g,{id:"enable_account_link",modelValue:e(n).enable_account_link,"onUpdate:modelValue":c[1]||(c[1]=t=>e(n).enable_account_link=t),label:e(l)("Enable Account Link"),help:e(l)("Enable user to link their players to account"),name:"enable_account_link",error:e(n).errors.enable_account_link},null,8,["modelValue","label","help","error"])]),u(s("div",de,[a(v,{id:"max_players_link_per_account",modelValue:e(n).max_players_link_per_account,"onUpdate:modelValue":c[2]||(c[2]=t=>e(n).max_players_link_per_account=t),label:e(l)("Max Players Per Account"),help:e(l)("Number of players that can be linked to one account in website."),type:"number",name:"max_players_link_per_account",error:e(n).errors.max_players_link_per_account,"help-error-flex":"flex-col"},null,8,["modelValue","label","help","error"])],512),[[b,e(n).enable_account_link]]),u(s("div",_e,[s("legend",ue,[p(r(e(l)("Account Link Success Commands"))+" ",1),s("span",me,r(e(l)("(runs when a player is linked to account)")),1)]),s("div",pe,[s("div",fe,[s("h3",ye,r(e(l)("Available Placeholders")),1),s("ol",ge,[s("li",null,[he,p(" - "+r(e(l)("Username of the player which is linked.")),1)]),s("li",null,[ke,p(" - "+r(e(l)("Unique Id of the player which is linked.")),1)])])]),s("div",be,[xe,s("label",ve,r(e(l)("Command")),1),s("label",we,r(e(l)("Run on servers")),1)]),(d(!0),_(S,null,U(e(n).account_link_after_success_commands,(t,o)=>(d(),_("div",{key:o,class:"flex flex-col pb-2"},[s("div",Ve,[s("button",{type:"button",class:"focus:outline-none group",onClick:i=>R(o)},[a(P,{class:"w-5 h-5 text-gray-300 group-hover:text-red-500",name:"trash"})],8,Ce),s("div",Ae,[s("div",Ue,[u(s("input",{"onUpdate:modelValue":i=>t.command=i,class:"block p-2.5 dark:bg-cool-gray-900 dark:text-gray-300 w-full dark:border-gray-700 border-gray-200 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",placeholder:`Enter Command #${o+1}`,type:"text"},null,8,Se),[[$,t.command]]),e(n).errors[`account_link_after_success_commands.${o}.command`]?(d(),_("span",$e,r(e(n).errors[`account_link_after_success_commands.${o}.command`]),1)):h("",!0)]),s("div",Le,[a(e(q),{modelValue:t.servers,"onUpdate:modelValue":i=>t.servers=i,class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:m.serversForAccountLink,"custom-label":w,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:e(l)("Leave empty to run on all servers")+"..."},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),s("p",Pe,r(e(n).errors[`account_link_after_success_commands.${o}.servers`]),1)]),s("div",qe,[a(g,{id:`link.is_player_online_required_${o}`,modelValue:t.config.is_player_online_required,"onUpdate:modelValue":i=>t.config.is_player_online_required=i,label:e(l)("Require player to be online"),help:e(l)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:`link.is_player_online_required_${o}`,error:e(n).errors[`account_link_after_success_commands.${o}.config.is_player_online_required`]},null,8,["id","modelValue","onUpdate:modelValue","label","help","name","error"]),a(g,{id:`link.is_run_only_first_link_${o}`,modelValue:t.config.is_run_only_first_link,"onUpdate:modelValue":i=>t.config.is_run_only_first_link=i,name:`link.is_run_only_first_link_${o}`,label:e(l)("Run on first link only"),help:e(l)("This command should only run if given player is getting linked for first time. (Eg: This wont run if player get unlinked and then linked again)"),error:e(n).errors[`account_link_after_success_commands.${o}.config.is_run_only_first_link`]},null,8,["id","modelValue","onUpdate:modelValue","name","label","help","error"])])])])]))),128)),e(n).account_link_after_success_commands.length<=0?(d(),_("div",Ee,r(e(l)("No commands on account link.")),1)):h("",!0),e(n).errors.account_link_after_success_commands?(d(),_("p",Re,r(e(n).errors.account_link_after_success_commands),1)):h("",!0),s("div",Ie,[s("button",{type:"button",class:"p-2 w-1/3 text-sm text-light-blue-500 rounded border border-light-blue-500 focus:outline-none hover:text-light-blue-300 hover:border-light-blue-300 transition ease-in-out duration-150",onClick:E},r(e(l)("Add New Link Command")),1)])])],512),[[b,e(n).enable_account_link]]),u(s("div",Te,[s("legend",Ne,[p(r(e(l)("Account Unlink Success Commands"))+" ",1),s("span",je,r(e(l)("(runs when a player is unlinked from account)")),1)]),s("div",Fe,[s("div",Me,[s("h3",Xe,r(e(l)("Available Placeholders")),1),s("ol",Be,[s("li",null,[De,p(" - "+r(e(l)("Username of the player which is unlinked.")),1)]),s("li",null,[Ye,p(" - "+r(e(l)("Unique Id of the player which is unlinked.")),1)])])]),s("div",Ke,[Oe,s("label",We,r(e(l)("Command")),1),s("label",ze,r(e(l)("Run on servers")),1)]),(d(!0),_(S,null,U(e(n).account_unlink_after_success_commands,(t,o)=>(d(),_("div",{key:o,class:"flex flex-col pb-2"},[s("div",Ge,[s("button",{type:"button",class:"focus:outline-none group",onClick:i=>T(o)},[a(P,{class:"w-5 h-5 text-gray-300 group-hover:text-red-500",name:"trash"})],8,He),s("div",Je,[s("div",Qe,[u(s("input",{"onUpdate:modelValue":i=>t.command=i,class:"block p-2.5 dark:bg-cool-gray-900 dark:text-gray-300 w-full dark:border-gray-700 border-gray-200 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",placeholder:`Enter Command #${o+1}`,type:"text"},null,8,Ze),[[$,t.command]]),e(n).errors[`account_unlink_after_success_commands.${o}.command`]?(d(),_("span",es,r(e(n).errors[`account_unlink_after_success_commands.${o}.command`]),1)):h("",!0)]),s("div",ss,[a(e(q),{modelValue:t.servers,"onUpdate:modelValue":i=>t.servers=i,class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm",options:m.serversForAccountLink,"custom-label":w,"track-by":"id",multiple:!0,"close-on-select":!1,"clear-on-select":!1,searchable:!1,placeholder:e(l)("Leave empty to run on all servers")+"..."},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),s("p",ls,r(e(n).errors[`account_unlink_after_success_commands.${o}.servers`]),1)]),s("div",ns,[a(g,{id:`unlink.is_player_online_required_${o}`,modelValue:t.config.is_player_online_required,"onUpdate:modelValue":i=>t.config.is_player_online_required=i,label:e(l)("Require player to be online"),help:e(l)("This command should only run if player is online on running server. If not online it will be queued to run when player comes online."),name:`unlink.is_player_online_required_${o}`,error:e(n).errors[`account_unlink_after_success_commands.${o}.config.is_player_online_required`]},null,8,["id","modelValue","onUpdate:modelValue","label","help","name","error"]),a(g,{id:`unlink.is_run_only_first_unlink_${o}`,modelValue:t.config.is_run_only_first_unlink,"onUpdate:modelValue":i=>t.config.is_run_only_first_unlink=i,name:`unlink.is_run_only_first_unlink_${o}`,label:e(l)("Run on first unlink only"),help:e(l)("This command should only run if given player is getting unlinked for first time. (Eg: This wont run if player was linked and unlinked before)"),error:e(n).errors[`account_unlink_after_success_commands.${o}.config.is_run_only_first_unlink`]},null,8,["id","modelValue","onUpdate:modelValue","name","label","help","error"])])])])]))),128)),e(n).account_unlink_after_success_commands.length<=0?(d(),_("div",ts,r(e(l)("No commands on account unlink.")),1)):h("",!0),e(n).errors.account_unlink_after_success_commands?(d(),_("p",os,r(e(n).errors.account_unlink_after_success_commands),1)):h("",!0),s("div",rs,[s("button",{type:"button",class:"p-2 w-1/3 text-sm text-light-blue-500 rounded border border-light-blue-500 focus:outline-none hover:text-light-blue-300 hover:border-light-blue-300 transition ease-in-out duration-150",onClick:I},r(e(l)("Add New Unlink Command")),1)])])],512),[[b,e(n).enable_account_link]]),s("div",as,[a(g,{id:"enable_sync_player_ranks_from_server",modelValue:e(n).enable_sync_player_ranks_from_server,"onUpdate:modelValue":c[3]||(c[3]=t=>e(n).enable_sync_player_ranks_from_server=t),label:e(l)("Enable Player Rank Sync"),help:e(l)("Enable this if you want to sync your player rank from server instead of website calculated rank. you must create a rank for each group you have in server making sure rank shortname matches the name of your player group in server."),name:"enable_sync_player_ranks_from_server",error:e(n).errors.enable_sync_player_ranks_from_server},null,8,["modelValue","label","help","error"])]),u(s("div",is,[a(O,{id:"sync_player_ranks_from_server_id",modelValue:e(n).sync_player_ranks_from_server_id,"onUpdate:modelValue":c[4]||(c[4]=t=>e(n).sync_player_ranks_from_server_id=t),name:"sync_player_ranks_from_server_id",error:e(n).errors.sync_player_ranks_from_server_id,label:e(l)("Rank Sync From Server"),placeholder:e(l)("Choose a server from which we should sync the rank.."),"disable-null":!1,"select-list":m.serversForRankSync},null,8,["modelValue","error","label","placeholder","select-list"])],512),[[b,e(n).enable_sync_player_ranks_from_server]])])]),s("div",cs,[a(K,{loading:e(n).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-bold rounded-md text-white bg-light-blue-600 hover:bg-light-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50 dark:bg-cool-gray-700 dark:hover:bg-cool-gray-600",type:"submit"},{default:k(()=>[p(r(e(l)("Save Plugin Settings")),1)]),_:1},8,["loading"])])])],40,le)])])])])])])])]),_:1})}}};export{As as default};
