import{o as d,d as f,a as r,r as P,T as V,x as R,l as S,c,w as u,b as m,u as o,t as s,J as N,e as y,f as w,i as B}from"./app-edbaa8b4.js";import{s as C}from"./vue-multiselect.esm-b55facd4.js";import{X as _}from"./XInput-58d66e10.js";import{u as A,A as H}from"./AppLayout-e4dad975.js";import{L}from"./LoadingButton-6e4122e8.js";import{_ as g}from"./AlertCard-8a499e6e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-24851635.js";import"./useAuthorizable-d5742cc2.js";import"./XMarkIcon-ff34866f.js";function U(i,p){return d(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})])}const j={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},q={class:"flex flex-col md:flex-row md:items-center md:justify-between"},z={key:0,class:"text-lg mb-2 md:mb-0 md:text-2xl font-bold text-gray-700 dark:text-gray-200"},D={key:1,class:"text-lg italic mb-2 md:mb-0 md:text-2xl font-bold text-gray-500 dark:text-gray-500"},M={key:0,class:"text-xs text-gray-500 dark:text-gray-500"},T={class:"text-sm"},X={as:"div",class:"w-full p-6 text-gray-500 rounded-lg text-medium dark:text-gray-400 bg-white shadow dark:bg-gray-800"},Y=["onSubmit"],E={class:"grid grid-cols-6 gap-6"},F={class:"col-span-6 sm:col-span-6 flex space-x-2"},G={class:"hidden md:block"},I={class:"col-span-6 sm:col-span-6"},J={class:"mt-6"},ae={__name:"ResetPassword",props:{uuid:{type:String,required:!1},players:{type:Array,required:!0},cooldown:{type:Number},cannotPlayerPasswordReset:{type:Boolean}},setup(i){const p=i,{generateRandomString:x}=A();let t=P(p.players[0]);const b=p.players.find(e=>e.uuid===p.uuid);b&&(t.value=b);const a=V({player_uuid:null,new_password:null,new_password_confirmation:null,reason:null}),h=()=>{a.player_uuid=t.value.uuid,a.post(route("reset-player-password.update"),{onSuccess:()=>{a.reset()}})},v=R(()=>a.processing||!t.value||p.cannotPlayerPasswordReset);return(e,l)=>{const k=S("AppHead");return d(),c(H,null,{default:u(()=>[m(k,{title:e.__("Reset Player Password")},null,8,["title"]),r("div",j,[r("div",q,[o(t)?(d(),f("h2",z,s(e.__("Reset password for :username",{username:o(t).username})),1)):(d(),f("h2",D,s(e.__("No Linked Players")),1)),m(o(C),{id:"username",modelValue:o(t),"onUpdate:modelValue":l[0]||(l[0]=n=>N(t)?t.value=n:t=n),class:"w-full md:w-1/3 bg-gray-300 border-gray-300 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm dark:bg-gray-900",options:i.players,multiple:!1,placeholder:e.__("Search")+"...",label:"username","allow-empty":!1,"deselect-label":e.__("Can't remove"),"track-by":"id"},null,8,["modelValue","options","placeholder","deselect-label"])]),o(t)?(d(),f("p",M,s(e.__("Player Uuid"))+": "+s(o(t).uuid),1)):y("",!0),i.cooldown?(d(),c(g,{key:1,"text-color":"text-yellow-800 dark:text-yellow-500","border-color":"border-yellow-500"},{default:u(()=>[w(s(e.__("You are on a cooldown! Please wait for :cooldown seconds before you can try again.",{cooldown:i.cooldown})),1)]),_:1})):y("",!0),o(t)?y("",!0):(d(),c(g,{key:2,"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{default:u(()=>[w(s(e.__("No linked players found. Please link a player to your account.")),1)]),_:1})),i.cannotPlayerPasswordReset?(d(),c(g,{key:3,"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{body:u(()=>[r("p",T,s(e.__("Site administrator has explicitly disabled this feature for your role. Contact for more information.")),1)]),default:u(()=>[w(s(e.__("Your are not allowed to reset your player passwords."))+" ",1)]),_:1})):y("",!0),r("div",X,[r("form",{class:"w-full mt-4",onSubmit:B(h,["prevent"])},[r("div",E,[r("div",F,[m(_,{id:"new_password",modelValue:o(a).new_password,"onUpdate:modelValue":l[1]||(l[1]=n=>o(a).new_password=n),label:e.__("New Password"),error:o(a).errors.new_password,type:"text",name:"new_password","help-error-flex":"flex-row"},null,8,["modelValue","label","error"]),r("div",null,[r("button",{type:"button",class:"inline-flex items-center px-4 py-4 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 tracking-widest whitespace-nowrap shadow-sm hover:text-gray-500 focus:outline-none active:text-gray-800 active:mt-0.5 active:bg-gray-50 transition ease-in-out duration-150 dark:bg-cool-gray-700 dark:text-gray-200 dark:border-gray-800 dark:hover:text-white dark:hover:bg-cool-gray-600",onClick:l[2]||(l[2]=n=>o(a).new_password=o(x)(16))},[m(o(U),{class:"inline h-5 w-5 mr-1"}),r("span",G,s(e.__("Generate Secure Password")),1)])])]),r("div",I,[m(_,{id:"reason",modelValue:o(a).reason,"onUpdate:modelValue":l[3]||(l[3]=n=>o(a).reason=n),label:e.__("Reason"),error:o(a).errors.reason,type:"text",name:"reason","help-error-flex":"flex-row",help:e.__("Small reason why are you changing the password?")},null,8,["modelValue","label","error","help"])])]),r("div",J,[m(L,{loading:o(a).processing,class:"inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",disabled:v.value,type:"submit"},{default:u(()=>[w(s(e.__("Reset Player Password")),1)]),_:1},8,["loading","disabled"])])],40,Y)])])]),_:1})}}};export{ae as default};
