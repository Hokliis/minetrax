import{o as d,d as m,a as r,r as R,T as S,x as h,l as N,c as w,w as i,S as B,b as c,u as o,t as a,J as C,e as p,f,i as A}from"./app-37a137ca.js";import{s as H}from"./vue-multiselect.esm-c305b9c7.js";import{X as b}from"./XInput-0f78058a.js";import{u as L,A as U}from"./AppLayout-f0beb308.js";import{L as Y}from"./LoadingButton-63f7a8a8.js";import{_ as g}from"./AlertCard-26f78684.js";import{r as j}from"./CheckCircleIcon-39162bd4.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Icon-3624adfa.js";import"./useAuthorizable-18e26e04.js";import"./XMarkIcon-2edfadb7.js";function q(y,n){return d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-3.183a.75.75 0 100 1.5h4.992a.75.75 0 00.75-.75V4.356a.75.75 0 00-1.5 0v3.18l-1.9-1.9A9 9 0 003.306 9.67a.75.75 0 101.45.388zm15.408 3.352a.75.75 0 00-.919.53 7.5 7.5 0 01-12.548 3.364l-1.902-1.903h3.183a.75.75 0 000-1.5H2.984a.75.75 0 00-.75.75v4.992a.75.75 0 001.5 0v-3.18l1.9 1.9a9 9 0 0015.059-4.035.75.75 0 00-.53-.918z","clip-rule":"evenodd"})])}const z={class:"max-w-6xl px-2 py-3 mx-auto space-y-4 md:py-12 md:px-10"},D={class:"flex flex-col md:flex-row md:items-center md:justify-between"},M={key:0,class:"text-lg mb-2 md:mb-0 md:text-2xl font-bold text-gray-700 dark:text-gray-200"},T={key:1,class:"text-lg italic mb-2 md:mb-0 md:text-2xl font-bold text-gray-500 dark:text-gray-500"},X={key:0,class:"text-xs text-gray-500 dark:text-gray-500"},$={class:"text-xl"},E={class:"text-sm"},F={class:"text-sm"},G={as:"div",class:"w-full p-6 text-gray-500 rounded-lg text-medium dark:text-gray-400 bg-white shadow dark:bg-gray-800"},I=["onSubmit"],J={class:"grid grid-cols-6 gap-6"},K={class:"col-span-6 sm:col-span-6 flex space-x-2"},O={class:"hidden md:block"},Q={class:"col-span-6 sm:col-span-6"},W={class:"mt-6"},Z={key:0,class:"text-xs text-orange-500 dark:text-orange-500 flex mt-2"},ce={__name:"ResetPassword",props:{uuid:{type:String,required:!1},players:{type:Array,required:!0},cooldown:{type:Number},cannotPlayerPasswordReset:{type:Boolean}},setup(y){const n=y,{generateRandomString:x}=L();let s=R(n.players[0]);const _=n.players.find(e=>e.uuid===n.uuid);_&&(s.value=_);const t=S({player_uuid:null,new_password:null,new_password_confirmation:null,reason:null}),v=()=>{t.player_uuid=s.value.uuid,t.post(route("reset-player-password.update"),{onSuccess:()=>{t.reset()}})},k=h(()=>t.processing||!s.value||n.cannotPlayerPasswordReset||n.cooldown>0),P=h(()=>{var e,l;return((l=(e=B().props)==null?void 0:e.toast)==null?void 0:l.type)==="success"});return(e,l)=>{const V=N("AppHead");return d(),w(U,null,{default:i(()=>[c(V,{title:e.__("Reset Player Password")},null,8,["title"]),r("div",z,[r("div",D,[o(s)?(d(),m("h2",M,a(e.__("Reset password for :username",{username:o(s).username})),1)):(d(),m("h2",T,a(e.__("No Linked Players")),1)),c(o(H),{id:"username",modelValue:o(s),"onUpdate:modelValue":l[0]||(l[0]=u=>C(s)?s.value=u:s=u),class:"w-full md:w-1/3 bg-gray-300 border-gray-300 rounded-md shadow-sm focus:ring-light-blue-500 focus:border-light-blue-500 sm:text-sm dark:bg-gray-900",options:y.players,multiple:!1,placeholder:e.__("Search")+"...",label:"username","allow-empty":!1,"deselect-label":e.__("Can't remove"),"track-by":"id"},null,8,["modelValue","options","placeholder","deselect-label"])]),o(s)?(d(),m("p",X,a(e.__("Player Uuid"))+": "+a(o(s).uuid),1)):p("",!0),P.value?(d(),w(g,{key:1,"text-color":"text-green-800 dark:text-green-500","border-color":"border-green-500"},{icon:i(()=>[c(o(j),{class:"fill-current h-6 w-6 text-green-500 mr-4"})]),body:i(()=>[r("p",E,a("Your player password has been changed successfully. You can now join the server with new password."),1)]),default:i(()=>[r("h2",$,a(e.__("Password changed successfully!")),1)]),_:1})):p("",!0),o(s)?p("",!0):(d(),w(g,{key:2,"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{default:i(()=>[f(a(e.__("No linked players found. Please link a player to your account.")),1)]),_:1})),y.cannotPlayerPasswordReset?(d(),w(g,{key:3,"text-color":"text-red-800 dark:text-red-500","border-color":"border-red-500"},{body:i(()=>[r("p",F,a(e.__("Site administrator has explicitly disabled this feature for your role. Contact for more information.")),1)]),default:i(()=>[f(a(e.__("Your are not allowed to reset your player passwords."))+" ",1)]),_:1})):p("",!0),r("div",G,[r("form",{class:"w-full mt-4",onSubmit:A(v,["prevent"])},[r("div",J,[r("div",K,[c(b,{id:"new_password",modelValue:o(t).new_password,"onUpdate:modelValue":l[1]||(l[1]=u=>o(t).new_password=u),label:e.__("New Password"),error:o(t).errors.new_password,type:"text",name:"new_password","help-error-flex":"flex-row"},null,8,["modelValue","label","error"]),r("div",null,[r("button",{type:"button",class:"inline-flex items-center px-4 py-4 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 tracking-widest whitespace-nowrap shadow-sm hover:text-gray-500 focus:outline-none active:text-gray-800 active:mt-0.5 active:bg-gray-50 transition ease-in-out duration-150 dark:bg-cool-gray-700 dark:text-gray-200 dark:border-gray-800 dark:hover:text-white dark:hover:bg-cool-gray-600",onClick:l[2]||(l[2]=u=>o(t).new_password=o(x)(16))},[c(o(q),{class:"inline h-5 w-5 mr-1"}),r("span",O,a(e.__("Generate Secure Password")),1)])])]),r("div",Q,[c(b,{id:"reason",modelValue:o(t).reason,"onUpdate:modelValue":l[3]||(l[3]=u=>o(t).reason=u),label:e.__("Reason"),error:o(t).errors.reason,type:"text",name:"reason","help-error-flex":"flex-row",help:e.__("Small reason why are you changing the password?")},null,8,["modelValue","label","error","help"])])]),r("div",W,[c(Y,{loading:o(t).processing,class:"inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",disabled:k.value,type:"submit"},{default:i(()=>[f(a(e.__("Reset Player Password")),1)]),_:1},8,["loading","disabled"])]),n.cooldown>0?(d(),m("span",Z,a(e.__("You are on a cooldown because you have recently changed your password. Refresh the page and try again after :cooldown seconds.",{cooldown:n.cooldown})),1)):p("",!0)],40,I)])])]),_:1})}}};export{ce as default};
